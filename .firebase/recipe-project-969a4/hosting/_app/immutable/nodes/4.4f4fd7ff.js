import{s as at,v as st,f as rt,d,g as Ke,r as ot}from"../chunks/scheduler.50dc1d72.js";import{S as it,i as ut,d as fe,v as ct,C as ye,u as dt,w as ft,x as ht,f as mt,t as pt,y as _t,G as Ce,j as f,s as x,k as h,l as R,z as X,c as E,g as C,m as a,a as de,A as s,E as B,B as W,F as gt,D as Je,o as Qe,p as We}from"../chunks/index.df132f49.js";import{A as lt}from"../chunks/AuthCheck.dee6af1b.js";import{_ as vt,d as bt,G as wt,p as yt,r as Ct,l as xt,n as Et,o as It,m as At,u as Ue}from"../chunks/firebase.3e9f43ea.js";import{h as Ze,c as Lt}from"../chunks/createKeywords.9ac0e201.js";async function $e(l,e,t,r,g,v,o,i){let b=!0;if(!e){alert("You must provide a menu name!");return}const D=vt(bt,"menus"),y={menuImg:null,menuName:e??"",userName:t??"",uid:r??"",tags:Ze(g),about:v??"",ingredients:o??{},precedures:i??{},lastestEdited:wt(),avgRating:null,ratings:{},views:0,favoritedBy:[],keywords:Lt(e??"",t??"",Ze(g))};let w;try{w=await yt(D,y)}catch(c){b=!1,console.error("Error writing to the database:",c)}if(w){const c=Ct(xt,`menus/${w.id}/menuImg.png`);let _,N;if(l)try{_=await Et(c,l[0]),N=await It(_.ref)}catch(S){b=!1,console.error("Error uploading to the storage:",S)}try{const S={menuId:w.id,menuImg:N??null};await At(w,S,{merge:!0})}catch(S){b=!1,console.error("Error writing to the database:",S)}}b&&(console.log("Successfully added new menu to the database!"),alert("You have successfully created a new menu!"),window.location.href=`/user/${r}`)}const m="src/routes/menu/create/+page.svelte";function et(l,e,t){const r=l.slice();return r[19]=e[t],r[20]=e,r[21]=t,r}function tt(l,e,t){const r=l.slice();return r[19]=e[t],r[22]=e,r[21]=t,r}function Se(l){let e,t,r;function g(){l[15].call(e,l[21])}const v={c:function(){e=f("input"),this.h()},l:function(i){e=h(i,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),this.h()},h:function(){a(e,"type","text"),a(e,"placeholder","what & how much?"),a(e,"class","input input-bordered w-full"),a(e,"min","0"),d(e,m,95,24,3634)},m:function(i,b){de(i,e,b),B(e,l[7][l[21]+1]),t||(r=W(e,"input",g),t=!0)},p:function(i,b){l=i,b&128&&e.value!==l[7][l[21]+1]&&B(e,l[7][l[21]+1])},d:function(i){i&&C(e),t=!1,r()}};return fe("SvelteRegisterBlock",{block:v,id:Se.name,type:"each",source:"(91:20) {#each Array(numIngredient) as _, index}",ctx:l}),v}function Ve(l){let e,t=l[21]+1+"",r,g,v,o,i,b;function D(){l[17].call(o,l[21])}const y={c:function(){e=f("label"),r=Qe(t),g=Qe(")"),v=x(),o=f("textarea"),this.h()},l:function(c){e=h(c,"LABEL",{class:!0});var _=R(e);r=We(_,t),g=We(_,")"),_.forEach(C),v=E(c),o=h(c,"TEXTAREA",{class:!0,placeholder:!0}),R(o).forEach(C),this.h()},h:function(){a(e,"class","inline-flex text-sm mt-3 mb-1 ml-3"),d(e,m,123,20,4816),a(o,"class","textarea textarea-bordered h-20 ml-4"),a(o,"placeholder","How to cook your menu"),d(o,m,126,20,4953)},m:function(c,_){de(c,e,_),s(e,r),s(e,g),de(c,v,_),de(c,o,_),B(o,l[8][l[21]+1]),i||(b=W(o,"input",D),i=!0)},p:function(c,_){l=c,_&256&&B(o,l[8][l[21]+1])},d:function(c){c&&(C(e),C(v),C(o)),i=!1,b()}};return fe("SvelteRegisterBlock",{block:y,id:Ve.name,type:"each",source:"(119:16) {#each Array(numProcedure) as _, index}",ctx:l}),y}function nt(l){let e,t,r,g,v="Upload the photo of the menu",o,i,b,D,y,w,c,_,N="Menu name",S,V,M,he="Required",ue,P,ce,j,z,me="Tag",u,O,xe,Y,Z,Oe="About",Ee,H,Ie,q,$,qe="Ingredient",Ae,K,ee,Ge="How many ingredients are there?",Le,G,ke,te,Re,T,le,Me="Procedure",Be,J,ne,ze="How many steps are there?",Pe,F,De,Ne,Q,He="publish",Te,Fe,se=ye(Array(l[2])),I=[];for(let L=0;L<se.length;L+=1)I[L]=Se(tt(l,se,L));let re=ye(Array(l[1])),A=[];for(let L=0;L<re.length;L+=1)A[L]=Ve(et(l,re,L));const Xe={c:function(){e=f("div"),t=f("form"),r=f("div"),g=f("label"),g.textContent=v,o=x(),i=f("img"),D=x(),y=f("input"),w=x(),c=f("div"),_=f("label"),_.textContent=N,S=x(),V=f("div"),M=f("span"),M.textContent=he,ue=x(),P=f("input"),ce=x(),j=f("div"),z=f("label"),z.textContent=me,u=x(),O=f("input"),xe=x(),Y=f("div"),Z=f("label"),Z.textContent=Oe,Ee=x(),H=f("textarea"),Ie=x(),q=f("div"),$=f("label"),$.textContent=qe,Ae=x(),K=f("div"),ee=f("label"),ee.textContent=Ge,Le=x(),G=f("input"),ke=x(),te=f("div");for(let p=0;p<I.length;p+=1)I[p].c();Re=x(),T=f("div"),le=f("label"),le.textContent=Me,Be=x(),J=f("div"),ne=f("label"),ne.textContent=ze,Pe=x(),F=f("input"),De=x();for(let p=0;p<A.length;p+=1)A[p].c();Ne=x(),Q=f("button"),Q.textContent=He,this.h()},l:function(p){e=h(p,"DIV",{class:!0});var k=R(e);t=h(k,"FORM",{class:!0});var n=R(t);r=h(n,"DIV",{class:!0});var U=R(r);g=h(U,"LABEL",{class:!0,"data-svelte-h":!0}),X(g)!=="svelte-1hnh5m2"&&(g.textContent=v),o=E(U),i=h(U,"IMG",{class:!0,src:!0,alt:!0,width:!0}),D=E(U),y=h(U,"INPUT",{type:!0,class:!0,accept:!0}),U.forEach(C),w=E(n),c=h(n,"DIV",{class:!0});var pe=R(c);_=h(pe,"LABEL",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-1p1dqi1"&&(_.textContent=N),S=E(pe),V=h(pe,"DIV",{class:!0});var _e=R(V);M=h(_e,"SPAN",{class:!0,"data-svelte-h":!0}),X(M)!=="svelte-yfich9"&&(M.textContent=he),ue=E(_e),P=h(_e,"INPUT",{type:!0,placeholder:!0,class:!0}),_e.forEach(C),pe.forEach(C),ce=E(n),j=h(n,"DIV",{class:!0});var ge=R(j);z=h(ge,"LABEL",{class:!0,"data-svelte-h":!0}),X(z)!=="svelte-1o89tvr"&&(z.textContent=me),u=E(ge),O=h(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),ge.forEach(C),xe=E(n),Y=h(n,"DIV",{class:!0});var ve=R(Y);Z=h(ve,"LABEL",{class:!0,"data-svelte-h":!0}),X(Z)!=="svelte-88p5d6"&&(Z.textContent=Oe),Ee=E(ve),H=h(ve,"TEXTAREA",{class:!0,placeholder:!0}),R(H).forEach(C),ve.forEach(C),Ie=E(n),q=h(n,"DIV",{class:!0});var oe=R(q);$=h(oe,"LABEL",{class:!0,"data-svelte-h":!0}),X($)!=="svelte-gz0him"&&($.textContent=qe),Ae=E(oe),K=h(oe,"DIV",{class:!0});var be=R(K);ee=h(be,"LABEL",{class:!0,"data-svelte-h":!0}),X(ee)!=="svelte-19nza0g"&&(ee.textContent=Ge),Le=E(be),G=h(be,"INPUT",{type:!0,class:!0,min:!0}),be.forEach(C),ke=E(oe),te=h(oe,"DIV",{class:!0});var Ye=R(te);for(let ae=0;ae<I.length;ae+=1)I[ae].l(Ye);Ye.forEach(C),oe.forEach(C),Re=E(n),T=h(n,"DIV",{class:!0});var ie=R(T);le=h(ie,"LABEL",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-69iasy"&&(le.textContent=Me),Be=E(ie),J=h(ie,"DIV",{class:!0});var we=R(J);ne=h(we,"LABEL",{class:!0,"data-svelte-h":!0}),X(ne)!=="svelte-1r1685v"&&(ne.textContent=ze),Pe=E(we),F=h(we,"INPUT",{type:!0,class:!0}),we.forEach(C),De=E(ie);for(let ae=0;ae<A.length;ae+=1)A[ae].l(ie);ie.forEach(C),Ne=E(n),Q=h(n,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Q)!=="svelte-nbo87n"&&(Q.textContent=He),n.forEach(C),k.forEach(C),this.h()},h:function(){a(g,"class","label"),d(g,m,28,16,735),a(i,"class","p-3"),Ke(i.src,b=l[3]??"")||a(i,"src",b),a(i,"alt",""),a(i,"width","256"),d(i,m,29,16,809),a(y,"type","file"),a(y,"class","file-input file-input-bordered w-full max-w-xs"),a(y,"accept","image/png, image/jpeg"),d(y,m,30,16,887),a(r,"class","form-control w-full max-w-xs mx-auto my-4"),d(r,m,26,12,590),a(_,"class","label"),d(_,m,40,16,1277),a(M,"class","indicator-item badge badge-warning text-xs"),d(M,m,42,20,1376),a(P,"type","text"),a(P,"placeholder","Name of your menu"),a(P,"class","input input-bordered w-full"),d(P,m,45,20,1515),a(V,"class","indicator"),d(V,m,41,16,1332),a(c,"class","form-control w-full max-w-sm mb-4"),d(c,m,38,12,1140),a(z,"class","label"),d(z,m,56,16,1935),a(O,"type","text"),a(O,"placeholder","please separate each tag with a space e.g. #tag1 #tag2 #..."),a(O,"class","input input-bordered w-full"),d(O,m,57,16,1984),a(j,"class","form-control w-full max-w-lg mb-4"),d(j,m,54,12,1798),a(Z,"class","label"),d(Z,m,67,16,2388),a(H,"class","textarea textarea-bordered h-24"),a(H,"placeholder","About your menu"),d(H,m,68,16,2439),a(Y,"class","form-control mb-4"),d(Y,m,65,12,2267),a($,"class","label"),d($,m,77,16,2770),a(ee,"class","inline-flex text-sm"),d(ee,m,80,20,2943),a(G,"type","number"),a(G,"class","inline-flex ml-2 input input-bordered w-20 h-8"),a(G,"min","0"),d(G,m,83,20,3084),a(K,"class","px-2 mb-2"),d(K,m,79,16,2899),a(te,"class","grid gap-1.5 px-4 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"),d(te,m,90,16,3353),a(q,"class","form-control mb-4"),d(q,m,75,12,2649),a(le,"class","label"),d(le,m,108,16,4135),a(ne,"class","inline-flex text-sm"),d(ne,m,112,20,4308),a(F,"type","number"),a(F,"class","inline-flex ml-2 input input-bordered w-20 h-8"),d(F,m,115,20,4443),a(J,"class","px-2 mb-2"),d(J,m,111,16,4264),a(T,"class","form-control mb-4"),d(T,m,106,12,4014),a(Q,"class","form-control btn btn-success mx-auto mt-6"),d(Q,m,134,12,5230),a(t,"class","card card-compact w-full h-full p-6 sm:p-10 border-2 bg-base-100 shadow-xl"),d(t,m,23,8,467),a(e,"class","p-6 md:px-8"),d(e,m,22,4,433)},m:function(p,k){de(p,e,k),s(e,t),s(t,r),s(r,g),s(r,o),s(r,i),s(r,D),s(r,y),s(t,w),s(t,c),s(c,_),s(c,S),s(c,V),s(V,M),s(V,ue),s(V,P),B(P,l[4]),s(t,ce),s(t,j),s(j,z),s(j,u),s(j,O),B(O,l[5]),s(t,xe),s(t,Y),s(Y,Z),s(Y,Ee),s(Y,H),B(H,l[6]),s(t,Ie),s(t,q),s(q,$),s(q,Ae),s(q,K),s(K,ee),s(K,Le),s(K,G),B(G,l[2]),s(q,ke),s(q,te);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(te,null);s(t,Re),s(t,T),s(T,le),s(T,Be),s(T,J),s(J,ne),s(J,Pe),s(J,F),B(F,l[1]),s(T,De);for(let n=0;n<A.length;n+=1)A[n]&&A[n].m(T,null);s(t,Ne),s(t,Q),Te||(Fe=[W(y,"change",l[10]),W(P,"input",l[11]),W(O,"input",l[12]),W(H,"input",l[13]),W(G,"input",l[14]),W(F,"input",l[16]),W(Q,"click",gt(l[18]),!1,!0,!1,!1)],Te=!0)},p:function(p,k){if(k&8&&!Ke(i.src,b=p[3]??"")&&a(i,"src",b),k&16&&P.value!==p[4]&&B(P,p[4]),k&32&&O.value!==p[5]&&B(O,p[5]),k&64&&B(H,p[6]),k&4&&Ce(G.value)!==p[2]&&B(G,p[2]),k&132){se=ye(Array(p[2]));let n;for(n=0;n<se.length;n+=1){const U=tt(p,se,n);I[n]?I[n].p(U,k):(I[n]=Se(U),I[n].c(),I[n].m(te,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=se.length}if(k&2&&Ce(F.value)!==p[1]&&B(F,p[1]),k&258){re=ye(Array(p[1]));let n;for(n=0;n<re.length;n+=1){const U=et(p,re,n);A[n]?A[n].p(U,k):(A[n]=Ve(U),A[n].c(),A[n].m(T,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=re.length}},d:function(p){p&&C(e),Je(I,p),Je(A,p),Te=!1,ot(Fe)}};return fe("SvelteRegisterBlock",{block:Xe,id:nt.name,type:"slot",source:"(19:0) <AuthCheck>",ctx:l}),Xe}function je(l){let e,t;e=new lt({props:{$$slots:{default:[nt]},$$scope:{ctx:l}},$$inline:!0});const r={c:function(){dt(e.$$.fragment)},l:function(v){ft(e.$$.fragment,v)},m:function(v,o){ht(e,v,o),t=!0},p:function(v,[o]){const i={};o&8389631&&(i.$$scope={dirty:o,ctx:v}),e.$set(i)},i:function(v){t||(mt(e.$$.fragment,v),t=!0)},o:function(v){pt(e.$$.fragment,v),t=!1},d:function(v){_t(e,v)}};return fe("SvelteRegisterBlock",{block:r,id:je.name,type:"component",source:"",ctx:l}),r}function kt(l,e,t){let r;st(Ue,"user"),rt(l,Ue,u=>t(9,r=u));let{$$slots:g={},$$scope:v}=e;ct("Page",g,[]);let o=1,i=1,b,D,y,w,c,_={},N={};const S=[];Object.keys(e).forEach(u=>{!~S.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)});function V(){b=this.files,t(0,b)}function M(){y=this.value,t(4,y)}function he(){w=this.value,t(5,w)}function ue(){c=this.value,t(6,c)}function P(){i=Ce(this.value),t(2,i)}function ce(u){_[u+1]=this.value,t(7,_)}function j(){o=Ce(this.value),t(1,o)}function z(u){N[u+1]=this.value,t(8,N)}const me=async()=>$e(b,y,(r==null?void 0:r.displayName)??"",(r==null?void 0:r.uid)??"",w,c,_,N);return l.$capture_state=()=>({AuthCheck:lt,user:Ue,writeNewMenu:$e,numProcedure:o,numIngredient:i,Img:b,previewURL:D,menuName:y,tagString:w,about:c,ingredients:_,precedures:N,$user:r}),l.$inject_state=u=>{"numProcedure"in u&&t(1,o=u.numProcedure),"numIngredient"in u&&t(2,i=u.numIngredient),"Img"in u&&t(0,b=u.Img),"previewURL"in u&&t(3,D=u.previewURL),"menuName"in u&&t(4,y=u.menuName),"tagString"in u&&t(5,w=u.tagString),"about"in u&&t(6,c=u.about),"ingredients"in u&&t(7,_=u.ingredients),"precedures"in u&&t(8,N=u.precedures)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty&1&&b&&t(3,D=URL.createObjectURL(b[0]))},[b,o,i,D,y,w,c,_,N,r,V,M,he,ue,P,ce,j,z,me]}class Tt extends it{constructor(e){super(e),ut(this,e,kt,je,at,{}),fe("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:je.name})}}export{Tt as component};
