import{d as ze,j as mt,a as He,r as _t,v as pt,x as vt,s as gt,b as bt,t as yt,y as wt,u as Ue}from"../chunks/firebase.420b8590.js";import{s as xt,v as Ct,f as Et,n as Ve,d,g as et,r as It}from"../chunks/scheduler.50dc1d72.js";import{S as kt,i as Pt,d as ue,v as At,e as tt,a as se,g as w,G as Ee,C as Ce,j as f,s as E,k as h,l as D,z as U,c as I,m as s,A as r,E as N,B as K,F as lt,D as nt,o as at,p as st}from"../chunks/index.1558d124.js";import{g as Lt}from"../chunks/globals.7f7f1b26.js";import{h as rt,c as Dt,r as ot}from"../chunks/createKeywords.1f7c83c2.js";const St=async({params:l})=>{const e=l.menuId;let t;const a=ze(He,`menus/${e}`),u=await mt(a);return u.exists()?(t=u.data(),console.log("Successfully reading menu from the database!")):console.log("No document found!"),{menu:t}},Ot=Object.freeze(Object.defineProperty({__proto__:null,load:St},Symbol.toStringTag,{value:"Module"}));async function it(l,e,t,a,u,y,c,n,_,x){let g=!0;const P=_t(yt,`menus/${a}/menuImg.png`);let p,b;if(e)try{p=await pt(P,e[0]),b=await vt(p.ref)}catch(C){g=!1,console.error("Error uploading to the storage:",C)}const V=ze(He,`menus/${a}`),S={menuImg:b??l,menuName:t??"",userName:u??"",uid:y??"",tags:rt(c),about:n??"",ingredients:_??{},procedures:x??{},lastestEdited:gt(),keywords:Dt(t??"",u??"",rt(c))};try{await bt(V,S,{merge:!0})}catch(C){g=!1,console.error("Error writing to the database:",C)}g&&(console.log("Successfully edited menu in the database!"),alert("You have successfully edited the menu!"),location.href=`/user/${a}`)}async function ct(l,e){const t=ze(He,`menus/${l}`);try{await wt(t)}catch(a){console.log("Successfully deleted menu in the database!"),alert("You have successfully deleted the menu!"),console.error("Error writing to the database:",a),location.href=`/user/${e}`}}const{Object:Tt}=Lt,m="src/routes/menu/edit/[menuId]/+page.svelte";function ut(l,e,t){const a=l.slice();return a[23]=e[t],a[24]=e,a[25]=t,a}function dt(l,e,t){const a=l.slice();return a[23]=e[t],a[26]=e,a[25]=t,a}function ft(l){let e,t,a="You have no permission to edit this menu!",u,y,c="Return to Homepage";const n={c:function(){e=f("div"),t=f("p"),t.textContent=a,u=E(),y=f("a"),y.textContent=c,this.h()},l:function(x){e=h(x,"DIV",{class:!0});var g=D(e);t=h(g,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1gn7qtv"&&(t.textContent=a),u=I(g),y=h(g,"A",{class:!0,href:!0,"data-svelte-h":!0}),U(y)!=="svelte-17eifp0"&&(y.textContent=c),g.forEach(w),this.h()},h:function(){s(t,"class","text-error text-xl m-6"),d(t,m,173,8,6643),s(y,"class","btn btn-error mb-6"),s(y,"href","/"),d(y,m,176,8,6753),s(e,"class","alert-error text-center"),d(e,m,172,4,6597)},m:function(x,g){se(x,e,g),r(e,t),r(e,u),r(e,y)},p:Ve,d:function(x){x&&w(e)}};return ue("SvelteRegisterBlock",{block:n,id:ft.name,type:"else",source:"(171:0) {:else}",ctx:l}),n}function ht(l){let e,t,a,u,y="Upload the photo of the menu",c,n,_,x,g,P,p,b,V="Menu name",S,C,k,_e="Required",de,R,fe,q,F,pe="Tag",he,j,me,z,i,Ye="About",Ie,G,ke,H,$,Fe="Ingrediant",Pe,J,ee,Ge="How many ingredients are there?",Ae,Y,Le,te,De,O,le,Xe="Procedure",Se,Q,ne,Ke="How many steps are there?",Te,X,Be,Ne,W,Je="save",Re,Z,Qe="delete",je,We,re=Ce(Array(l[6])),A=[];for(let T=0;T<re.length;T+=1)A[T]=Oe(dt(l,re,T));let oe=Ce(Array(l[8])),L=[];for(let T=0;T<oe.length;T+=1)L[T]=Me(ut(l,oe,T));const Ze={c:function(){e=f("div"),t=f("form"),a=f("div"),u=f("label"),u.textContent=y,c=E(),n=f("img"),x=E(),g=f("input"),P=E(),p=f("div"),b=f("label"),b.textContent=V,S=E(),C=f("div"),k=f("span"),k.textContent=_e,de=E(),R=f("input"),fe=E(),q=f("div"),F=f("label"),F.textContent=pe,he=E(),j=f("input"),me=E(),z=f("div"),i=f("label"),i.textContent=Ye,Ie=E(),G=f("textarea"),ke=E(),H=f("div"),$=f("label"),$.textContent=Fe,Pe=E(),J=f("div"),ee=f("label"),ee.textContent=Ge,Ae=E(),Y=f("input"),Le=E(),te=f("div");for(let v=0;v<A.length;v+=1)A[v].c();De=E(),O=f("div"),le=f("label"),le.textContent=Xe,Se=E(),Q=f("div"),ne=f("label"),ne.textContent=Ke,Te=E(),X=f("input"),Be=E();for(let v=0;v<L.length;v+=1)L[v].c();Ne=E(),W=f("button"),W.textContent=Je,Re=E(),Z=f("button"),Z.textContent=Qe,this.h()},l:function(v){e=h(v,"DIV",{class:!0});var B=D(e);t=h(B,"FORM",{class:!0});var o=D(t);a=h(o,"DIV",{class:!0});var M=D(a);u=h(M,"LABEL",{class:!0,"data-svelte-h":!0}),U(u)!=="svelte-1hnh5m2"&&(u.textContent=y),c=I(M),n=h(M,"IMG",{class:!0,src:!0,alt:!0,width:!0}),x=I(M),g=h(M,"INPUT",{type:!0,class:!0,accept:!0}),M.forEach(w),P=I(o),p=h(o,"DIV",{class:!0});var ve=D(p);b=h(ve,"LABEL",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1p1dqi1"&&(b.textContent=V),S=I(ve),C=h(ve,"DIV",{class:!0});var ge=D(C);k=h(ge,"SPAN",{class:!0,"data-svelte-h":!0}),U(k)!=="svelte-yfich9"&&(k.textContent=_e),de=I(ge),R=h(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),ge.forEach(w),ve.forEach(w),fe=I(o),q=h(o,"DIV",{class:!0});var be=D(q);F=h(be,"LABEL",{class:!0,"data-svelte-h":!0}),U(F)!=="svelte-1o89tvr"&&(F.textContent=pe),he=I(be),j=h(be,"INPUT",{type:!0,placeholder:!0,class:!0}),be.forEach(w),me=I(o),z=h(o,"DIV",{class:!0});var ye=D(z);i=h(ye,"LABEL",{class:!0,"data-svelte-h":!0}),U(i)!=="svelte-88p5d6"&&(i.textContent=Ye),Ie=I(ye),G=h(ye,"TEXTAREA",{class:!0,placeholder:!0}),D(G).forEach(w),ye.forEach(w),ke=I(o),H=h(o,"DIV",{class:!0});var ie=D(H);$=h(ie,"LABEL",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-1coz2re"&&($.textContent=Fe),Pe=I(ie),J=h(ie,"DIV",{class:!0});var we=D(J);ee=h(we,"LABEL",{class:!0,"data-svelte-h":!0}),U(ee)!=="svelte-19nza0g"&&(ee.textContent=Ge),Ae=I(we),Y=h(we,"INPUT",{type:!0,class:!0,min:!0}),we.forEach(w),Le=I(ie),te=h(ie,"DIV",{class:!0});var $e=D(te);for(let ae=0;ae<A.length;ae+=1)A[ae].l($e);$e.forEach(w),ie.forEach(w),De=I(o),O=h(o,"DIV",{class:!0});var ce=D(O);le=h(ce,"LABEL",{class:!0,"data-svelte-h":!0}),U(le)!=="svelte-69iasy"&&(le.textContent=Xe),Se=I(ce),Q=h(ce,"DIV",{class:!0});var xe=D(Q);ne=h(xe,"LABEL",{class:!0,"data-svelte-h":!0}),U(ne)!=="svelte-1r1685v"&&(ne.textContent=Ke),Te=I(xe),X=h(xe,"INPUT",{type:!0,class:!0}),xe.forEach(w),Be=I(ce);for(let ae=0;ae<L.length;ae+=1)L[ae].l(ce);ce.forEach(w),Ne=I(o),W=h(o,"BUTTON",{class:!0,"data-svelte-h":!0}),U(W)!=="svelte-p5ajy0"&&(W.textContent=Je),Re=I(o),Z=h(o,"BUTTON",{class:!0,"data-svelte-h":!0}),U(Z)!=="svelte-1i2tzii"&&(Z.textContent=Qe),o.forEach(w),B.forEach(w),this.h()},h:function(){s(u,"class","label"),d(u,m,38,16,1210),s(n,"class","p-3"),et(n.src,_=l[1]??"")||s(n,"src",_),s(n,"alt",""),s(n,"width","256"),d(n,m,39,16,1284),s(g,"type","file"),s(g,"class","file-input file-input-bordered w-full max-w-xs"),s(g,"accept","image/png, image/jpeg"),d(g,m,40,16,1362),s(a,"class","form-control w-full max-w-xs mx-auto my-4"),d(a,m,36,12,1065),s(b,"class","label"),d(b,m,50,16,1752),s(k,"class","indicator-item badge badge-warning text-xs"),d(k,m,52,20,1851),s(R,"type","text"),s(R,"placeholder","Name of your menu"),s(R,"class","input input-bordered w-full"),d(R,m,55,20,1990),s(C,"class","indicator"),d(C,m,51,16,1807),s(p,"class","form-control w-full max-w-sm mb-4"),d(p,m,48,12,1615),s(F,"class","label"),d(F,m,66,16,2410),s(j,"type","text"),s(j,"placeholder","please separate each tag with a space e.g. #tag1 #tag2 #..."),s(j,"class","input input-bordered w-full"),d(j,m,67,16,2459),s(q,"class","form-control w-full max-w-lg mb-4"),d(q,m,64,12,2273),s(i,"class","label"),d(i,m,77,16,2863),s(G,"class","textarea textarea-bordered h-24"),s(G,"placeholder","About your menu"),d(G,m,78,16,2914),s(z,"class","form-control mb-4"),d(z,m,75,12,2742),s($,"class","label"),d($,m,87,16,3245),s(ee,"class","inline-flex text-sm"),d(ee,m,90,20,3418),s(Y,"type","number"),s(Y,"class","inline-flex ml-2 input input-bordered w-20 h-8"),s(Y,"min","0"),d(Y,m,93,20,3559),s(J,"class","px-2 mb-2"),d(J,m,89,16,3374),s(te,"class","grid gap-1.5 px-4 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"),d(te,m,100,16,3828),s(H,"class","form-control mb-4"),d(H,m,85,12,3124),s(le,"class","label"),d(le,m,118,16,4610),s(ne,"class","inline-flex text-sm"),d(ne,m,122,20,4783),s(X,"type","number"),s(X,"class","inline-flex ml-2 input input-bordered w-20 h-8"),d(X,m,125,20,4918),s(Q,"class","px-2 mb-2"),d(Q,m,121,16,4739),s(O,"class","form-control mb-4"),d(O,m,116,12,4489),s(W,"class","form-control btn btn-success mx-auto mt-6"),d(W,m,144,12,5705),s(Z,"class","form-control btn btn-error mx-auto mt-6"),d(Z,m,162,12,6316),s(t,"class","card card-compact w-full h-full p-6 sm:p-10 border-2 bg-base-100 shadow-xl"),d(t,m,33,8,942),s(e,"class","p-6 md:px-8"),d(e,m,32,4,908)},m:function(v,B){se(v,e,B),r(e,t),r(t,a),r(a,u),r(a,c),r(a,n),r(a,x),r(a,g),r(t,P),r(t,p),r(p,b),r(p,S),r(p,C),r(C,k),r(C,de),r(C,R),N(R,l[2]),r(t,fe),r(t,q),r(q,F),r(q,he),r(q,j),N(j,l[3]),r(t,me),r(t,z),r(z,i),r(z,Ie),r(z,G),N(G,l[4]),r(t,ke),r(t,H),r(H,$),r(H,Pe),r(H,J),r(J,ee),r(J,Ae),r(J,Y),N(Y,l[6]),r(H,Le),r(H,te);for(let o=0;o<A.length;o+=1)A[o]&&A[o].m(te,null);r(t,De),r(t,O),r(O,le),r(O,Se),r(O,Q),r(Q,ne),r(Q,Te),r(Q,X),N(X,l[8]),r(O,Be);for(let o=0;o<L.length;o+=1)L[o]&&L[o].m(O,null);r(t,Ne),r(t,W),r(t,Re),r(t,Z),je||(We=[K(g,"change",l[13]),K(R,"input",l[14]),K(j,"input",l[15]),K(G,"input",l[16]),K(Y,"input",l[17]),K(X,"input",l[19]),K(W,"click",lt(l[21]),!1,!0,!1,!1),K(Z,"click",lt(l[22]),!1,!0,!1,!1)],je=!0)},p:function(v,B){if(B&2&&!et(n.src,_=v[1]??"")&&s(n,"src",_),B&4&&R.value!==v[2]&&N(R,v[2]),B&8&&j.value!==v[3]&&N(j,v[3]),B&16&&N(G,v[4]),B&64&&Ee(Y.value)!==v[6]&&N(Y,v[6]),B&96){re=Ce(Array(v[6]));let o;for(o=0;o<re.length;o+=1){const M=dt(v,re,o);A[o]?A[o].p(M,B):(A[o]=Oe(M),A[o].c(),A[o].m(te,null))}for(;o<A.length;o+=1)A[o].d(1);A.length=re.length}if(B&256&&Ee(X.value)!==v[8]&&N(X,v[8]),B&384){oe=Ce(Array(v[8]));let o;for(o=0;o<oe.length;o+=1){const M=ut(v,oe,o);L[o]?L[o].p(M,B):(L[o]=Me(M),L[o].c(),L[o].m(O,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=oe.length}},d:function(v){v&&w(e),nt(A,v),nt(L,v),je=!1,It(We)}};return ue("SvelteRegisterBlock",{block:Ze,id:ht.name,type:"if",source:"(31:0) {#if menu?.uid === $user?.uid}",ctx:l}),Ze}function Oe(l){let e,t,a;function u(){l[18].call(e,l[25])}const y={c:function(){e=f("input"),this.h()},l:function(n){e=h(n,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),this.h()},h:function(){s(e,"type","text"),s(e,"placeholder","what & how much?"),s(e,"class","input input-bordered w-full"),s(e,"min","0"),d(e,m,105,24,4109)},m:function(n,_){se(n,e,_),N(e,l[5][l[25]+1]),t||(a=K(e,"input",u),t=!0)},p:function(n,_){l=n,_&32&&e.value!==l[5][l[25]+1]&&N(e,l[5][l[25]+1])},d:function(n){n&&w(e),t=!1,a()}};return ue("SvelteRegisterBlock",{block:y,id:Oe.name,type:"each",source:"(103:20) {#each Array(numIngredient) as _, index}",ctx:l}),y}function Me(l){let e,t=l[25]+1+"",a,u,y,c,n,_;function x(){l[20].call(c,l[25])}const g={c:function(){e=f("label"),a=at(t),u=at(")"),y=E(),c=f("textarea"),this.h()},l:function(p){e=h(p,"LABEL",{class:!0});var b=D(e);a=st(b,t),u=st(b,")"),b.forEach(w),y=I(p),c=h(p,"TEXTAREA",{class:!0,placeholder:!0}),D(c).forEach(w),this.h()},h:function(){s(e,"class","inline-flex text-sm mt-3 mb-1 ml-3"),d(e,m,133,20,5291),s(c,"class","textarea textarea-bordered h-20 ml-4"),s(c,"placeholder","How to cook your menu"),d(c,m,136,20,5428)},m:function(p,b){se(p,e,b),r(e,a),r(e,u),se(p,y,b),se(p,c,b),N(c,l[7][l[25]+1]),n||(_=K(c,"input",x),n=!0)},p:function(p,b){l=p,b&128&&N(c,l[7][l[25]+1])},d:function(p){p&&(w(e),w(y),w(c)),n=!1,_()}};return ue("SvelteRegisterBlock",{block:g,id:Me.name,type:"each",source:"(131:16) {#each Array(numProcedure) as _, index}",ctx:l}),g}function qe(l){let e;function t(c,n){var _,x;return((_=c[10])==null?void 0:_.uid)===((x=c[9])==null?void 0:x.uid)?ht:ft}let a=t(l),u=a(l);const y={c:function(){u.c(),e=tt()},l:function(n){u.l(n),e=tt()},m:function(n,_){u.m(n,_),se(n,e,_)},p:function(n,[_]){a===(a=t(n))&&u?u.p(n,_):(u.d(1),u=a(n),u&&(u.c(),u.m(e.parentNode,e)))},i:Ve,o:Ve,d:function(n){n&&w(e),u.d(n)}};return ue("SvelteRegisterBlock",{block:y,id:qe.name,type:"component",source:"",ctx:l}),y}function Bt(l,e,t){let a;Ct(Ue,"user"),Et(l,Ue,i=>t(9,a=i));let{$$slots:u={},$$scope:y}=e;At("Page",u,[]);let{data:c}=e;const{menu:n}=c;let _,x=n==null?void 0:n.menuImg,g=n==null?void 0:n.menuName,P=n==null?void 0:n.menuId,p=ot(n==null?void 0:n.tags),b=n==null?void 0:n.about,V=(n==null?void 0:n.ingredients)??{},S=Object.keys(V).slice(-1)[0];S?S=+S:S=1;let C=(n==null?void 0:n.procedures)??{},k=Object.keys(C).slice(-1)[0];k?k=+k:k=1,l.$$.on_mount.push(function(){c===void 0&&!("data"in e||l.$$.bound[l.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const _e=["data"];Tt.keys(e).forEach(i=>{!~_e.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)});function de(){_=this.files,t(0,_)}function R(){g=this.value,t(2,g)}function fe(){p=this.value,t(3,p)}function q(){b=this.value,t(4,b)}function F(){S=Ee(this.value),t(6,S)}function pe(i){V[i+1]=this.value,t(5,V)}function he(){k=Ee(this.value),t(8,k)}function j(i){C[i+1]=this.value,t(7,C)}const me=async()=>it(x,_,g,P,(a==null?void 0:a.displayName)??"",(a==null?void 0:a.uid)??"",p,b,V,C),z=async()=>ct(P,(a==null?void 0:a.uid)??"");return l.$$set=i=>{"data"in i&&t(12,c=i.data)},l.$capture_state=()=>({user:Ue,reverseTagString:ot,writeMenu:it,deleteMenu:ct,data:c,menu:n,Img:_,previewURL:x,menuName:g,menuId:P,tagString:p,about:b,ingredients:V,numIngredient:S,procedures:C,numProcedure:k,$user:a}),l.$inject_state=i=>{"data"in i&&t(12,c=i.data),"Img"in i&&t(0,_=i.Img),"previewURL"in i&&t(1,x=i.previewURL),"menuName"in i&&t(2,g=i.menuName),"menuId"in i&&t(11,P=i.menuId),"tagString"in i&&t(3,p=i.tagString),"about"in i&&t(4,b=i.about),"ingredients"in i&&t(5,V=i.ingredients),"numIngredient"in i&&t(6,S=i.numIngredient),"procedures"in i&&t(7,C=i.procedures),"numProcedure"in i&&t(8,k=i.numProcedure)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty&1&&_&&t(1,x=URL.createObjectURL(_[0]))},[_,x,g,p,b,V,S,C,k,a,n,P,c,de,R,fe,q,F,pe,he,j,me,z]}class Mt extends kt{constructor(e){super(e),Pt(this,e,Bt,qe,xt,{data:12}),ue("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:qe.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Mt as component,Ot as universal};
