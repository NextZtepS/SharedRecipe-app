import{s as at,v as st,f as rt,d,g as Ke,r as ot}from"../chunks/scheduler.50dc1d72.js";import{S as it,i as ut,d as fe,v as ct,C as ye,u as dt,w as ft,x as ht,f as mt,t as pt,y as _t,G as xe,j as f,s as C,k as h,l as D,z as X,c as E,g as x,m as a,a as de,A as s,E as R,B as W,F as vt,D as Je,o as Qe,p as We}from"../chunks/index.1558d124.js";import{A as lt}from"../chunks/AuthCheck.e4a93936.js";import{g as gt,a as bt,s as wt,p as yt,r as xt,t as Ct,v as Et,x as It,b as At,u as Ue}from"../chunks/firebase.420b8590.js";import{h as Ze,c as Lt}from"../chunks/createKeywords.1f7c83c2.js";async function $e(l,e,t,r,v,g,o,i){let b=!0;if(!e){alert("You must provide a menu name!");return}const P=gt(bt,"menus"),y={menuImg:null,menuName:e??"",userName:t??"",uid:r??"",tags:Ze(v),about:g??"",ingredients:o??{},precedures:i??{},lastestEdited:wt(),avgRating:null,ratings:{},views:0,favoritedBy:[],keywords:Lt(e??"",t??"",Ze(v))};let w;try{w=await yt(P,y)}catch(c){b=!1,console.error("Error writing to the database:",c)}if(w){const c=xt(Ct,`menus/${w.id}/menuImg.png`);let _,T;if(l)try{_=await Et(c,l[0]),T=await It(_.ref)}catch(S){b=!1,console.error("Error uploading to the storage:",S)}try{const S={menuId:w.id,menuImg:T??null};await At(w,S,{merge:!0})}catch(S){b=!1,console.error("Error writing to the database:",S)}}b&&(console.log("Successfully added new menu to the database!"),alert("You have successfully created a new menu!"),location.href=`/user/${r}`)}const m="src/routes/menu/create/+page.svelte";function et(l,e,t){const r=l.slice();return r[19]=e[t],r[20]=e,r[21]=t,r}function tt(l,e,t){const r=l.slice();return r[19]=e[t],r[22]=e,r[21]=t,r}function Se(l){let e,t,r;function v(){l[15].call(e,l[21])}const g={c:function(){e=f("input"),this.h()},l:function(i){e=h(i,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),this.h()},h:function(){a(e,"type","text"),a(e,"placeholder","what & how much?"),a(e,"class","input input-bordered w-full"),a(e,"min","0"),d(e,m,95,24,3634)},m:function(i,b){de(i,e,b),R(e,l[7][l[21]+1]),t||(r=W(e,"input",v),t=!0)},p:function(i,b){l=i,b&128&&e.value!==l[7][l[21]+1]&&R(e,l[7][l[21]+1])},d:function(i){i&&x(e),t=!1,r()}};return fe("SvelteRegisterBlock",{block:g,id:Se.name,type:"each",source:"(91:20) {#each Array(numIngredient) as _, index}",ctx:l}),g}function Ve(l){let e,t=l[21]+1+"",r,v,g,o,i,b;function P(){l[17].call(o,l[21])}const y={c:function(){e=f("label"),r=Qe(t),v=Qe(")"),g=C(),o=f("textarea"),this.h()},l:function(c){e=h(c,"LABEL",{class:!0});var _=D(e);r=We(_,t),v=We(_,")"),_.forEach(x),g=E(c),o=h(c,"TEXTAREA",{class:!0,placeholder:!0}),D(o).forEach(x),this.h()},h:function(){a(e,"class","inline-flex text-sm mt-3 mb-1 ml-3"),d(e,m,123,20,4816),a(o,"class","textarea textarea-bordered h-20 ml-4"),a(o,"placeholder","How to cook your menu"),d(o,m,126,20,4953)},m:function(c,_){de(c,e,_),s(e,r),s(e,v),de(c,g,_),de(c,o,_),R(o,l[8][l[21]+1]),i||(b=W(o,"input",P),i=!0)},p:function(c,_){l=c,_&256&&R(o,l[8][l[21]+1])},d:function(c){c&&(x(e),x(g),x(o)),i=!1,b()}};return fe("SvelteRegisterBlock",{block:y,id:Ve.name,type:"each",source:"(119:16) {#each Array(numProcedure) as _, index}",ctx:l}),y}function nt(l){let e,t,r,v,g="Upload the photo of the menu",o,i,b,P,y,w,c,_,T="Menu name",S,V,z,he="Required",ue,B,ce,j,H,me="Tag",u,O,Ce,Y,Z,Oe="About",Ee,F,Ie,q,$,qe="Ingredient",Ae,K,ee,Me="How many ingredients are there?",Le,M,ke,te,De,N,le,ze="Procedure",Re,J,ne,He="How many steps are there?",Be,G,Pe,Te,Q,Fe="publish",Ne,Ge,se=ye(Array(l[2])),I=[];for(let L=0;L<se.length;L+=1)I[L]=Se(tt(l,se,L));let re=ye(Array(l[1])),A=[];for(let L=0;L<re.length;L+=1)A[L]=Ve(et(l,re,L));const Xe={c:function(){e=f("div"),t=f("form"),r=f("div"),v=f("label"),v.textContent=g,o=C(),i=f("img"),P=C(),y=f("input"),w=C(),c=f("div"),_=f("label"),_.textContent=T,S=C(),V=f("div"),z=f("span"),z.textContent=he,ue=C(),B=f("input"),ce=C(),j=f("div"),H=f("label"),H.textContent=me,u=C(),O=f("input"),Ce=C(),Y=f("div"),Z=f("label"),Z.textContent=Oe,Ee=C(),F=f("textarea"),Ie=C(),q=f("div"),$=f("label"),$.textContent=qe,Ae=C(),K=f("div"),ee=f("label"),ee.textContent=Me,Le=C(),M=f("input"),ke=C(),te=f("div");for(let p=0;p<I.length;p+=1)I[p].c();De=C(),N=f("div"),le=f("label"),le.textContent=ze,Re=C(),J=f("div"),ne=f("label"),ne.textContent=He,Be=C(),G=f("input"),Pe=C();for(let p=0;p<A.length;p+=1)A[p].c();Te=C(),Q=f("button"),Q.textContent=Fe,this.h()},l:function(p){e=h(p,"DIV",{class:!0});var k=D(e);t=h(k,"FORM",{class:!0});var n=D(t);r=h(n,"DIV",{class:!0});var U=D(r);v=h(U,"LABEL",{class:!0,"data-svelte-h":!0}),X(v)!=="svelte-1hnh5m2"&&(v.textContent=g),o=E(U),i=h(U,"IMG",{class:!0,src:!0,alt:!0,width:!0}),P=E(U),y=h(U,"INPUT",{type:!0,class:!0,accept:!0}),U.forEach(x),w=E(n),c=h(n,"DIV",{class:!0});var pe=D(c);_=h(pe,"LABEL",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-1p1dqi1"&&(_.textContent=T),S=E(pe),V=h(pe,"DIV",{class:!0});var _e=D(V);z=h(_e,"SPAN",{class:!0,"data-svelte-h":!0}),X(z)!=="svelte-yfich9"&&(z.textContent=he),ue=E(_e),B=h(_e,"INPUT",{type:!0,placeholder:!0,class:!0}),_e.forEach(x),pe.forEach(x),ce=E(n),j=h(n,"DIV",{class:!0});var ve=D(j);H=h(ve,"LABEL",{class:!0,"data-svelte-h":!0}),X(H)!=="svelte-1o89tvr"&&(H.textContent=me),u=E(ve),O=h(ve,"INPUT",{type:!0,placeholder:!0,class:!0}),ve.forEach(x),Ce=E(n),Y=h(n,"DIV",{class:!0});var ge=D(Y);Z=h(ge,"LABEL",{class:!0,"data-svelte-h":!0}),X(Z)!=="svelte-88p5d6"&&(Z.textContent=Oe),Ee=E(ge),F=h(ge,"TEXTAREA",{class:!0,placeholder:!0}),D(F).forEach(x),ge.forEach(x),Ie=E(n),q=h(n,"DIV",{class:!0});var oe=D(q);$=h(oe,"LABEL",{class:!0,"data-svelte-h":!0}),X($)!=="svelte-gz0him"&&($.textContent=qe),Ae=E(oe),K=h(oe,"DIV",{class:!0});var be=D(K);ee=h(be,"LABEL",{class:!0,"data-svelte-h":!0}),X(ee)!=="svelte-19nza0g"&&(ee.textContent=Me),Le=E(be),M=h(be,"INPUT",{type:!0,class:!0,min:!0}),be.forEach(x),ke=E(oe),te=h(oe,"DIV",{class:!0});var Ye=D(te);for(let ae=0;ae<I.length;ae+=1)I[ae].l(Ye);Ye.forEach(x),oe.forEach(x),De=E(n),N=h(n,"DIV",{class:!0});var ie=D(N);le=h(ie,"LABEL",{class:!0,"data-svelte-h":!0}),X(le)!=="svelte-69iasy"&&(le.textContent=ze),Re=E(ie),J=h(ie,"DIV",{class:!0});var we=D(J);ne=h(we,"LABEL",{class:!0,"data-svelte-h":!0}),X(ne)!=="svelte-1r1685v"&&(ne.textContent=He),Be=E(we),G=h(we,"INPUT",{type:!0,class:!0}),we.forEach(x),Pe=E(ie);for(let ae=0;ae<A.length;ae+=1)A[ae].l(ie);ie.forEach(x),Te=E(n),Q=h(n,"BUTTON",{class:!0,"data-svelte-h":!0}),X(Q)!=="svelte-nbo87n"&&(Q.textContent=Fe),n.forEach(x),k.forEach(x),this.h()},h:function(){a(v,"class","label"),d(v,m,28,16,735),a(i,"class","p-3"),Ke(i.src,b=l[3]??"")||a(i,"src",b),a(i,"alt",""),a(i,"width","256"),d(i,m,29,16,809),a(y,"type","file"),a(y,"class","file-input file-input-bordered w-full max-w-xs"),a(y,"accept","image/png, image/jpeg"),d(y,m,30,16,887),a(r,"class","form-control w-full max-w-xs mx-auto my-4"),d(r,m,26,12,590),a(_,"class","label"),d(_,m,40,16,1277),a(z,"class","indicator-item badge badge-warning text-xs"),d(z,m,42,20,1376),a(B,"type","text"),a(B,"placeholder","Name of your menu"),a(B,"class","input input-bordered w-full"),d(B,m,45,20,1515),a(V,"class","indicator"),d(V,m,41,16,1332),a(c,"class","form-control w-full max-w-sm mb-4"),d(c,m,38,12,1140),a(H,"class","label"),d(H,m,56,16,1935),a(O,"type","text"),a(O,"placeholder","please separate each tag with a space e.g. #tag1 #tag2 #..."),a(O,"class","input input-bordered w-full"),d(O,m,57,16,1984),a(j,"class","form-control w-full max-w-lg mb-4"),d(j,m,54,12,1798),a(Z,"class","label"),d(Z,m,67,16,2388),a(F,"class","textarea textarea-bordered h-24"),a(F,"placeholder","About your menu"),d(F,m,68,16,2439),a(Y,"class","form-control mb-4"),d(Y,m,65,12,2267),a($,"class","label"),d($,m,77,16,2770),a(ee,"class","inline-flex text-sm"),d(ee,m,80,20,2943),a(M,"type","number"),a(M,"class","inline-flex ml-2 input input-bordered w-20 h-8"),a(M,"min","0"),d(M,m,83,20,3084),a(K,"class","px-2 mb-2"),d(K,m,79,16,2899),a(te,"class","grid gap-1.5 px-4 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"),d(te,m,90,16,3353),a(q,"class","form-control mb-4"),d(q,m,75,12,2649),a(le,"class","label"),d(le,m,108,16,4135),a(ne,"class","inline-flex text-sm"),d(ne,m,112,20,4308),a(G,"type","number"),a(G,"class","inline-flex ml-2 input input-bordered w-20 h-8"),d(G,m,115,20,4443),a(J,"class","px-2 mb-2"),d(J,m,111,16,4264),a(N,"class","form-control mb-4"),d(N,m,106,12,4014),a(Q,"class","form-control btn btn-success mx-auto mt-6"),d(Q,m,134,12,5230),a(t,"class","card card-compact w-full h-full p-6 sm:p-10 border-2 bg-base-100 shadow-xl"),d(t,m,23,8,467),a(e,"class","p-6 md:px-8"),d(e,m,22,4,433)},m:function(p,k){de(p,e,k),s(e,t),s(t,r),s(r,v),s(r,o),s(r,i),s(r,P),s(r,y),s(t,w),s(t,c),s(c,_),s(c,S),s(c,V),s(V,z),s(V,ue),s(V,B),R(B,l[4]),s(t,ce),s(t,j),s(j,H),s(j,u),s(j,O),R(O,l[5]),s(t,Ce),s(t,Y),s(Y,Z),s(Y,Ee),s(Y,F),R(F,l[6]),s(t,Ie),s(t,q),s(q,$),s(q,Ae),s(q,K),s(K,ee),s(K,Le),s(K,M),R(M,l[2]),s(q,ke),s(q,te);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(te,null);s(t,De),s(t,N),s(N,le),s(N,Re),s(N,J),s(J,ne),s(J,Be),s(J,G),R(G,l[1]),s(N,Pe);for(let n=0;n<A.length;n+=1)A[n]&&A[n].m(N,null);s(t,Te),s(t,Q),Ne||(Ge=[W(y,"change",l[10]),W(B,"input",l[11]),W(O,"input",l[12]),W(F,"input",l[13]),W(M,"input",l[14]),W(G,"input",l[16]),W(Q,"click",vt(l[18]),!1,!0,!1,!1)],Ne=!0)},p:function(p,k){if(k&8&&!Ke(i.src,b=p[3]??"")&&a(i,"src",b),k&16&&B.value!==p[4]&&R(B,p[4]),k&32&&O.value!==p[5]&&R(O,p[5]),k&64&&R(F,p[6]),k&4&&xe(M.value)!==p[2]&&R(M,p[2]),k&132){se=ye(Array(p[2]));let n;for(n=0;n<se.length;n+=1){const U=tt(p,se,n);I[n]?I[n].p(U,k):(I[n]=Se(U),I[n].c(),I[n].m(te,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=se.length}if(k&2&&xe(G.value)!==p[1]&&R(G,p[1]),k&258){re=ye(Array(p[1]));let n;for(n=0;n<re.length;n+=1){const U=et(p,re,n);A[n]?A[n].p(U,k):(A[n]=Ve(U),A[n].c(),A[n].m(N,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=re.length}},d:function(p){p&&x(e),Je(I,p),Je(A,p),Ne=!1,ot(Ge)}};return fe("SvelteRegisterBlock",{block:Xe,id:nt.name,type:"slot",source:"(19:0) <AuthCheck>",ctx:l}),Xe}function je(l){let e,t;e=new lt({props:{$$slots:{default:[nt]},$$scope:{ctx:l}},$$inline:!0});const r={c:function(){dt(e.$$.fragment)},l:function(g){ft(e.$$.fragment,g)},m:function(g,o){ht(e,g,o),t=!0},p:function(g,[o]){const i={};o&8389631&&(i.$$scope={dirty:o,ctx:g}),e.$set(i)},i:function(g){t||(mt(e.$$.fragment,g),t=!0)},o:function(g){pt(e.$$.fragment,g),t=!1},d:function(g){_t(e,g)}};return fe("SvelteRegisterBlock",{block:r,id:je.name,type:"component",source:"",ctx:l}),r}function kt(l,e,t){let r;st(Ue,"user"),rt(l,Ue,u=>t(9,r=u));let{$$slots:v={},$$scope:g}=e;ct("Page",v,[]);let o=1,i=1,b,P,y,w,c,_={},T={};const S=[];Object.keys(e).forEach(u=>{!~S.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)});function V(){b=this.files,t(0,b)}function z(){y=this.value,t(4,y)}function he(){w=this.value,t(5,w)}function ue(){c=this.value,t(6,c)}function B(){i=xe(this.value),t(2,i)}function ce(u){_[u+1]=this.value,t(7,_)}function j(){o=xe(this.value),t(1,o)}function H(u){T[u+1]=this.value,t(8,T)}const me=async()=>$e(b,y,(r==null?void 0:r.displayName)??"",(r==null?void 0:r.uid)??"",w,c,_,T);return l.$capture_state=()=>({AuthCheck:lt,user:Ue,writeNewMenu:$e,numProcedure:o,numIngredient:i,Img:b,previewURL:P,menuName:y,tagString:w,about:c,ingredients:_,precedures:T,$user:r}),l.$inject_state=u=>{"numProcedure"in u&&t(1,o=u.numProcedure),"numIngredient"in u&&t(2,i=u.numIngredient),"Img"in u&&t(0,b=u.Img),"previewURL"in u&&t(3,P=u.previewURL),"menuName"in u&&t(4,y=u.menuName),"tagString"in u&&t(5,w=u.tagString),"about"in u&&t(6,c=u.about),"ingredients"in u&&t(7,_=u.ingredients),"precedures"in u&&t(8,T=u.precedures)},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{l.$$.dirty&1&&b&&t(3,P=URL.createObjectURL(b[0]))},[b,o,i,P,y,w,c,_,T,r,V,z,he,ue,B,ce,j,H,me]}class Nt extends it{constructor(e){super(e),ut(this,e,kt,je,at,{}),fe("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:je.name})}}export{Nt as component};
